<!-- Header Section -->
<ion-header [translucent]="true">
    <ion-toolbar>
      <ion-title>Site Selection</ion-title>
    </ion-toolbar>
  </ion-header>
  
  <!-- Content Section -->
  <ion-content [fullscreen]="true">
    <!-- Collapsed Header -->
    <ion-header collapse="condense">
      <ion-toolbar>
        <ion-title size="large">Site Selection</ion-title>
      </ion-toolbar>
    </ion-header>

    <!-- Refresh and Home Button -->
    <ion-item>
        <ion-row>
            <ion-col>
                <ion-button (click)="init()">
                    <ion-icon name="refresh"></ion-icon> Refresh
                </ion-button>
            </ion-col>
            <ion-col>
                <ion-button (click)="navigate('')">
                    <ion-icon name="home"></ion-icon> Home
                </ion-button>
            </ion-col>
            <ion-col>
                <ion-button (click)="logout()">
                    <ion-icon name="log-out"></ion-icon>
                </ion-button>
            </ion-col>
        </ion-row>

        

    </ion-item>
  
    <!-- Search Bar -->
    <ion-item>
        <ion-label>Search for a site:</ion-label>
    </ion-item>
    <ion-item>
      <ion-input
        interface="action-sheet"
        [(ngModel)]="searchQuery"
        placeholder="Search"
        (input)="filterSites()"
      ></ion-input>
    </ion-item>

    <!-- Site List -->
    <ion-list *ngIf=" searchQuery == '' ">
        <div>
            <div class="site-load" *ngIf="sites.length<1">
                <img src="../assets/loader.gif">
               
              </div>
            <ion-item *ngFor="let site of sites">
                <ion-grid>
                <ion-row>
                    <ion-col size="3">
                        <img [src]="getImageUrl(site.logo)" height="40px" />
                    </ion-col>
                    <ion-col size="6">
                        <ion-label>{{ site.name }}</ion-label>
                    </ion-col>
                    <ion-col size="3">
                        <ion-button (click)="setSite(site.id)" color="dark">Select</ion-button>
                    </ion-col>
                </ion-row>
                </ion-grid>
            </ion-item>
        </div>
        
    </ion-list>
    <!-- Handle the else -->
    <ion-list *ngIf=" searchQuery != '' ">
        <div *ngIf="filteredSites.length > 0">
            <ion-item *ngFor="let site of filteredSites">
            <ion-grid>
                <ion-row>
                <ion-col size="3">
                    <img [src]="getImageUrl(site.logo)" height="40px" />
                </ion-col>
                <ion-col size="6">
                    <ion-label>{{ site.name }}</ion-label>
                </ion-col>
                <ion-col size="3">
                    <!-- <ion-button (click)="setSite({{ site }})" color="dark">Select</ion-button> -->
                    <ion-button (click)="setSite(site.id)" color="dark">Select</ion-button>
                </ion-col>
                </ion-row>
            </ion-grid>
            </ion-item>
        </div>

        <!-- No Results Message -->
        <div *ngIf="filteredSites.length === 0">
            <ion-label>No sites found. Try searching again!</ion-label>
        </div>
    </ion-list>
  
    
  </ion-content>